id: RIS-TASK-GOV-061-LANE-SANDBOX-INTEGRATION
type: task
status: completed
priority: high
category: governance
classification: T2
bundle: bundle_6
version: v1.8.3

title: "Bundle 6: Lane Sandbox Integration"
description: |
  Integrate Bundle 4 sandboxing with lane structure, ensuring T1+ work
  is performed in lane-specific sandboxes before promotion to production.

created: 2025-11-28T00:00:00Z
completed: 2025-11-28T00:00:00Z
owner: governance

context:
  capsule_version: v1.8.3
  bundle: bundle_6_multi_agent_parallelization
  related_bundles: [bundle_4_sandboxing]

scope:
  sandbox_directories:
    - lanes/backend/sandbox/
    - lanes/frontend/sandbox/
    - lanes/infra/sandbox/
    - lanes/parser/sandbox/
    - lanes/worker/sandbox/
    - lanes/rules/sandbox/
    - lanes/data/sandbox/
    - lanes/governance/sandbox/

  integration_points:
    - Lane engine enforces sandbox usage for T1+ work
    - Classification engine determines T0-T3 tier
    - Sandbox workflow integrated into /work command
    - Provenance records sandbox activity in lane ledgers

workflow:
  - step_1: "Classify work as T0/T1/T2/T3"
  - step_2: "If T1+: route to lanes/{lane}/sandbox/"
  - step_3: "Execute work in sandbox isolation"
  - step_4: "Run tests according to classification tier"
  - step_5: "Record results in lanes/{lane}/ledger/"
  - step_6: "On success: promote to production paths"

deliverables:
  - "8 sandbox directories created"
  - "Sandbox workflow integrated into lane engine"
  - "Classification-based sandbox routing active"
  - "Provenance tracking for sandbox activity"

fpg_compliance:
  - FPG-LANE-SANDBOX-001: "All sandbox work in lanes/{lane}/sandbox/"
  - FPG-LANE-SANDBOX-002: "Sandbox promotion to allowed_paths only"

testing:
  - classification: T2
  - tests_required:
    - Validate sandbox directories exist
    - Validate T1+ work routed to sandbox
    - Validate sandbox promotion workflow
    - Validate sandbox provenance recording

kb_references:
  - docs/kb/governance/lane_sandbox_flow.md

related_tasks:
  - RIS-TASK-GOV-060-LANE-SETUP
  - RIS-TASK-GOV-064-LANE-PROVENANCE

notes: |
  Sandbox integration completed. Lane-specific sandboxes now enforce:
  - T1+ work isolation before production promotion
  - Classification-based testing requirements
  - Provenance tracking for all sandbox activity
  - Safe promotion workflow with validation
