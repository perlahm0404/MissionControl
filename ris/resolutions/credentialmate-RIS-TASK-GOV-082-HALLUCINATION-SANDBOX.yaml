task_id: RIS-TASK-GOV-082-HALLUCINATION-SANDBOX
title: Integrate Hallucination Engine with Sandbox (Bundle 4 + Bundle 8)
type: governance_implementation
risk: medium
status: completed
created: 2025-11-28
bundle: Bundle 8 â€“ AI Error-Correction / Anti-Hallucination Engine
capsule: v1.8.2

description: |
  Integrate the Hallucination Engine into the Sandbox apply loop so that all
  AI-generated files are validated BEFORE drift repair. Unsafe outputs are
  rejected to .sandbox/rejected/ with categorization.

acceptance_criteria:
  - hallucination_precheck() runs BEFORE drift repair in sandbox apply loop
  - Violations categorized and moved to .sandbox/rejected/<category>/
  - Auto-correctable violations moved to .sandbox/validated/
  - Safe files continue normal sandbox flow
  - RIS incidents created for high-risk hallucinations
  - All violations logged to governance/hallucination/hallucination_log.jsonl

sandbox_integration:
  - Pre-validation: hallucination_precheck()
  - Rejection categories:
      - invalid_paths/
      - invented_files/
      - boundary_violations/
      - schema_violations/
      - unsafe_operations/
      - malformed_syntax/
  - Auto-correction: low-risk violations
  - Logging: hallucination_log.jsonl and corrections_log.jsonl

deliverables:
  - .sandbox/rejected/ directory structure
  - Sandbox validation hooks updated
  - Hallucination logging system active

dependencies:
  - RIS-TASK-GOV-080-HALLUCINATION-ENGINE
  - RIS-TASK-GOV-081-HALLUCINATION-FILTERS
  - Bundle 4 (Sandbox)

kb_references:
  - docs/kb/governance/hallucination_engine_v1.8.3.md

completed_at: 2025-11-28
