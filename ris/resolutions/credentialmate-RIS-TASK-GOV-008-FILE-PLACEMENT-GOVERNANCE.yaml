---
event_type: governance_enhancement
event_id: RIS-TASK-GOV-008-FILE-PLACEMENT-GOVERNANCE
title: Add File Placement Governance (FPG) to Capsule v1.8.2
status: completed
priority: high
created_at: 2025-11-27T00:00:00Z
updated_at: 2025-11-27T00:00:00Z
phase: 7
capsule_version: v1.8.2
change_category: governance_rule_addition
---

## Description
Add File Placement Governance (FPG) rules to Capsule v1.8.2 to enforce canonical storage locations for all agent-generated files. This prevents root-level clutter, ensures deterministic file organization, and integrates with lifecycle hooks to block drift.

## Motivation
- Root-level file proliferation has caused repository clutter
- Session summaries, RIS entries, and KB articles need canonical paths
- Lifecycle hooks lacked enforcement for file placement rules
- Agents need clear, deterministic guidance for where to place generated files

## Change Plan

### 1. Capsule v1.8.2 Update
Added Section 12.4 "File Placement Governance (FPG)" defining:
- **Canonical Paths**:
  - `sessions/YYYYMMDD/SESSION_ID.md` — Session summaries
  - `sessions/index.md` — Session index
  - `sessions/_template/session_summary_v1.8.2.md` — Session template
  - `ris/tasks/` — RIS task entries
  - `ris/sessions/` — RIS session metadata
  - `ris/incidents/` — RIS incident reports
  - `docs/kb/` — Knowledge base articles (organized by subdirectories)
  - `docs/kb/templates/` — KB templates
  - `scripts/diagnostics/` — Diagnostic scripts
  - `governance/capsule-vX.X.X.md` — Capsule files and governance artifacts
  - `zdelete/` — Archive for unclassified or deprecated files (with manifest)

- **Placement Rules**:
  1. All session summaries → `sessions/YYYYMMDD/SESSION_ID.md`
  2. All RIS entries → `ris/tasks/`, `ris/incidents/`, `ris/sessions/`
  3. All KB entries → `docs/kb/` subdirectories
  4. All diagnostic scripts → `scripts/diagnostics/`
  5. Root-level file outputs FORBIDDEN (except approved project files)
  6. Unclassified files → `zdelete/` with manifest entry

- **Lifecycle Hook Enforcement**:
  - task-end: Place all generated files using FPG
  - session-end: Write summary using FPG path
  - RIS+KB updates: Enforce correct directories
  - Drift detection: Flag violations when placement violates FPG

- **Exceptions**: Approved project files (README, .gitignore, package.json, etc.)

### 2. Claire Orchestrator Hook Updates
Updated `commands/claire.md` to integrate FPG:
- Section 2.2 (RIS Management): Added FPG enforcement note
- Section 2.3 (KB Management): Added FPG enforcement note, added `templates/` subdirectory
- Section 8.2 (During Session): Added FPG validation and blocking rules
- Section 8.3 (Session End): Added FPG-compliant session summary placement

### 3. RIS Documentation
Created `ris/tasks/RIS-TASK-GOV-008-FILE-PLACEMENT-GOVERNANCE.yaml` documenting:
- Rule addition rationale
- Governance impact
- Canonical paths
- Enforcement mechanisms

### 4. KB Documentation
Created `docs/kb/governance/file_placement_governance.md` summarizing:
- FPG purpose
- Canonical path reference
- Enforcement hooks
- Common violations and fixes

## Implementation Details

### Files Modified
1. `governance/capsule-v1.8.2.md` — Added Section 12.4 (FPG)
2. `commands/claire.md` — Updated Sections 2.2, 2.3, 8.2, 8.3 with FPG enforcement

### Files Created
1. `ris/tasks/RIS-TASK-GOV-008-FILE-PLACEMENT-GOVERNANCE.yaml` — This RIS entry
2. `docs/kb/governance/file_placement_governance.md` — KB reference article

### Governance Impact
- **UGL-F (Filesystem Stability)**: Enhanced with explicit canonical paths
- **UGL-B (Behavioral Governance)**: Agents now have deterministic file placement rules
- **Section 14 (Claire Orchestration Hooks)**: Integrated FPG into task-end and session-end hooks

## Rollback Plan
If FPG enforcement causes issues:
1. Revert Section 12.4 from `governance/capsule-v1.8.2.md`
2. Revert FPG references from `commands/claire.md`
3. Archive RIS and KB entries to `zdelete/`
4. Return to ad-hoc file placement (not recommended)

## Testing & Validation
- Validate that session summaries are placed in `sessions/YYYYMMDD/`
- Validate that RIS entries are placed in `ris/tasks/`, `ris/incidents/`, `ris/sessions/`
- Validate that KB entries are placed in `docs/kb/` subdirectories
- Validate that root-level outputs are blocked (except approved files)
- Validate that `zdelete/` manifest is updated for unclassified files

## Risks & Mitigations
| Risk | Mitigation |
|------|------------|
| Agents violate FPG rules | Lifecycle hooks detect and flag violations |
| Root-level clutter returns | FPG blocks root-level outputs during session |
| Misplaced RIS/KB entries | FPG redirects to correct directories |
| Template path confusion | FPG defines single source of truth: `sessions/_template/` |

## Dependencies
- Capsule v1.8.2
- Claire Orchestrator v1.8.2
- Lifecycle hooks (session-start, task-end, session-end)

## Approver
Human (via /claire invocation)

## Impact
- **Severity**: Low
- **Scope**: Governance system, file organization
- **Blast Radius**: All agent file outputs
- **Reversibility**: High (simple revert)

## Follow-Up Actions
1. Monitor FPG compliance in next 3 sessions
2. Update session summary template to reference FPG
3. Add FPG validation script to `scripts/diagnostics/`
4. Create pre-commit hook to detect FPG violations (Phase 14+)

## Related Artifacts
- Capsule v1.8.2: `governance/capsule-v1.8.2.md`
- Claire Orchestrator: `commands/claire.md`
- KB Article: `docs/kb/governance/file_placement_governance.md`
- Session Template: `sessions/_template/session_summary_v1.8.2.md` (to be created)

## Conclusion
FPG provides deterministic, enforceable file placement rules integrated into Claire's lifecycle hooks, preventing drift and ensuring long-term repository stability.
