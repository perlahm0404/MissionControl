id: RIS-TASK-GOV-105-RULES-EVAL-TESTS
title: Implement Rules Engine Evaluation Tests
type: testing
status: completed
priority: high
created: 2025-11-28
completed: 2025-11-28
bundle: "10"
version: "1.8.3"
parent_task: RIS-TASK-GOV-100-TESTING-ENGINE

objective: |
  Implement comprehensive rules engine evaluation testing covering all rule
  types, scenarios, and outcome validation with golden test preservation.

scope:
  - CME rules test matrix
  - License rules test matrix
  - Compliance rules test matrix
  - Rules engine test documentation
  - Lane test runner for rules lane
  - Mock rules payload generators

deliverables:
  - "✓ governance/testing/rules_engine_test_matrix.md"
  - "✓ governance/lanes/rules/tests_runner.md"
  - "✓ tests/config/simulation_matrix.json (rules_simulations section)"
  - "✓ tests/generators/mock_rules_payload.py"

test_matrices:
  cme_rules:
    CME-001_annual_requirement:
      - Compliant: 50 hours → PASS
      - Non-compliant: 20 hours → FAIL
      - Partial: 40 hours → WARNING
      - Missing data: No records → ERROR
      - Edge: Exactly 50.0 → PASS
      - Edge: 49.9 hours → FAIL

    CME-002_category_distribution:
      - Compliant: A:25, B:25 → PASS
      - Non-compliant: A:50, B:0 → FAIL
      - Partial: A:30, B:20 → WARNING
      - Missing: No categories → ERROR

  license_rules:
    LIC-001_expiration_check:
      - Active: 365 days → PASS
      - Expiring soon: 30 days → WARNING
      - Expired: -1 day → FAIL
      - Far future: 3650 days → WARNING (suspicious)
      - Missing: No date → ERROR

    LIC-002_multi_state:
      - All valid: CA:active, NY:active → PASS
      - One invalid: CA:active, NY:expired → FAIL
      - Missing state: Provider in TX, no TX license → FAIL

  compliance_rules:
    COMP-001_provider_score:
      - Fully compliant: All pass → PASS (score: 100)
      - Mostly compliant: 1 warning → WARNING (score: 85)
      - Non-compliant: 1 failure → FAIL (score: 60)
      - Critical: License expired → FAIL (score: 0)

golden_rule_evaluations:
  - CME-GOLDEN-001: 50 CME hours → PASS (immutable)
  - LIC-GOLDEN-001: Active license, 180 days → PASS (immutable)
  - COMP-GOLDEN-001: Fully compliant → PASS, score 100 (immutable)
  - CME-GOLDEN-002: 0 CME hours → FAIL (immutable)
  - LIC-GOLDEN-002: Expired license → FAIL (immutable)

edge_case_testing:
  boundary_conditions:
    - Exactly at threshold
    - 0.1 below threshold
    - 0.1 above threshold
    - Zero values
    - Null values
    - Missing fields

  invalid_data:
    - Wrong data types
    - Out-of-range values
    - Invalid enum values
    - Malformed dates
    - Circular dependencies

enforcement:
  - T1 level (unit tests, merge-blocking)
  - T2 level (integration tests, merge-blocking)
  - T3 level (golden scenarios, deploy-blocking)
  - Quarterly golden validation sweep
  - Failures create RIS-INC

references:
  - governance/testing/rules_engine_test_matrix.md
  - governance/lanes/rules/tests_runner.md
  - apps/rules-engine/src/
