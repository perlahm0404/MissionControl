---
id: RIS-TASK-STRUCTURE-CONSOLIDATION-PHASE2-V1
title: "Folder Consolidation Phase 2 - Scripts/Infra + CI/CD"
type: task
status: completed
priority: high
risk_level: high
created: 2025-11-30T23:35:00Z
completed: 2025-11-30T23:40:00Z
owner: governance
lane: governance
phase: 7
capsule: v10.0

# Summary
Executed Phase 2 of folder consolidation plan: consolidated scripts/infra folders and updated 25+ GitHub Actions workflows to new paths. HIGH-RISK operation due to CI/CD breaking changes.

# Scope
- Move scripts/ → infra/scripts/
- Rename infra/terraform/ → infra/iac/
- Archive governance/v10/ → zdelete/governance-v10-archived-20251130
- Update all workflow script paths (scripts/* → infra/scripts/*)
- Update all terraform paths (infra/terraform → infra/iac)
- Update governance paths (governance/* → docs/governance/active/*)
- Update KB paths (docs/kb/ → docs/knowledge/)

# Execution
- Branch: folder-consolidation-phase2
- Commit: 4e96e40
- Files Changed: 100 files (25 workflows + 75 script/infra files)
- Root Folders: 21 → 20 (-1 folder: governance/)

# Workflows Updated (25 files)
✅ api-type-parity.yml
✅ backend-tests.yml
✅ dependency-review.yml
✅ deploy-prod.yml (governance capsule v1.8.2 → v10.0)
✅ deploy-staging.yml (governance capsule v1.8.2 → v10.0)
✅ detect-catalog-drift.yml
✅ docker-build.yml
✅ frontend-build.yml
✅ governance-ci.yml
✅ governance-integrity.yml (removed old governance/ triggers)
✅ pr-driftscan.yml
✅ pr-goldenflow.yml
✅ pr-kb-ris-sync.yml (governance/ → docs/governance/, kb/ → knowledge/)
✅ pr-secretscan.yml
✅ pr-validate.yml
✅ schema-contract-check.yml
✅ security-scan.yml
✅ test-coverage.yml
✅ test-unit.yml
✅ validate-links.yml
✅ validate-metadata.yml
✅ validate-naming.yml
✅ validate-parity.yml
✅ validate-structure.yml
✅ (1 more workflow file)

# Critical Changes
1. **Scripts Path Migration**: All script references updated from `scripts/` to `infra/scripts/`
2. **Governance v10 Alignment**: Deployment workflows now reference `docs/governance/active/capsule-v10.0.md` (was `governance/capsule-v1.8.2.md`)
3. **IAC Standardization**: Terraform directory renamed to `infra/iac/` for standard naming
4. **Governance Archive**: Old `governance/v10/` archived to `zdelete/` (non-destructive)

# Verification
✅ Zero old script/ references in workflows (grep verified)
✅ Zero old governance/ references in workflows (grep verified)
✅ All workflows syntax-validated
✅ Capsule v10.0 references updated in deploy-prod.yml and deploy-staging.yml
✅ Provenance paths updated to docs/governance/active/provenance/
✅ KB/RIS sync paths updated to docs/knowledge/

# Impact
- CI/CD: HIGH - All workflows referencing scripts/ were broken until updated
- Deployment: Governance path updates required for prod/staging deploys
- Local Dev: Script paths updated (all scripts now in infra/scripts/)
- Rollback: git revert 4e96e40 + restore workflow files (30 min recovery)

# Risk Mitigation
- Automated sed replacements for bulk updates
- Manual review of deploy-prod.yml and deploy-staging.yml (critical paths)
- Grep verification to ensure no old references remain
- Syntax validation of all workflow files

# Related
- Plan: sessions/20251130/FOLDER-CONSOLIDATION-PR-PLAN.md
- PR: https://github.com/mylaiviet/CREDMATE/pull/new/folder-consolidation-phase2
- Previous: RIS-TASK-STRUCTURE-CONSOLIDATION-PHASE1-V1
- Deferred: Phase 3 (app renames), Phase 4 (schema extraction)

# Governance
- Capsule: v10.0 compliant
- Non-destructive: Archive via git mv (no deletions)
- FPG: Aligned with v10.0 file placement governance
- UGL: No boundary violations
- Breaking Changes: Documented and verified
