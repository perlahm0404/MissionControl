id: RIS-TASK-GOV-062-LANE-CONFLICT-PREVENTION
type: task
status: completed
priority: critical
category: governance
classification: T2
bundle: bundle_6
version: v1.8.3

title: "Bundle 6: Lane Conflict Prevention Engine"
description: |
  Implement lane conflict detection and prevention to ensure parallel agents
  do not interfere with each other's work.

created: 2025-11-28T00:00:00Z
completed: 2025-11-28T00:00:00Z
owner: governance

context:
  capsule_version: v1.8.3
  bundle: bundle_6_multi_agent_parallelization
  related_bundles: [bundle_2, bundle_3]

scope:
  conflict_types:
    - direct_file: "Two lanes modify same file simultaneously"
    - schema_dependency: "Backend uses schema before data lane commits"
    - interface_contract: "Frontend consumes API before backend finalizes"
    - task_type: "Worker changes task signature without backend coordination"
    - validation_rule: "Rules lane breaks existing API behavior"
    - infrastructure: "Infra changes affect running services"

  prevention_strategies:
    - path_segregation: "Via allowed_paths.json"
    - coordination_protocol: "COORD-RIS required for cross-lane ops"
    - interface_freezing: "Freeze during coordination"
    - versioned_interfaces: "API v1/v2, task v1/v2"
    - sandbox_isolation: "Test cross-lane integration in sandbox"

deliverables:
  - governance/lanes/lane_engine.md
  - governance/lanes/conflict_prevention.md
  - governance/lanes/cross_lane_protocol.md

enforcement:
  - Rule 1: "Block writes outside allowed_paths.json"
  - Rule 2: "Require COORD-RIS for cross-lane operations"
  - Rule 3: "Block writes to forbidden_directories"
  - Rule 4: "Enforce sandbox containment for T1+ work"
  - Rule 5: "Protect lane ledger immutability"

violation_response:
  - CRITICAL: "Block operation, create RIS-INC, notify governance"
  - HIGH: "Block operation, prompt for COORD-RIS"
  - MEDIUM: "Block operation, suggest correct lane"
  - LOW: "Log warning, allow with provenance note"

fpg_compliance:
  - FPG-LANE-ENGINE-001: "All lane engine docs in governance/lanes/"

testing:
  - classification: T2
  - tests_required:
    - Validate allowed_paths.json enforcement
    - Validate forbidden_directories blocking
    - Validate COORD-RIS requirement detection
    - Validate conflict detection algorithm

kb_references:
  - docs/kb/governance/lane_conflict_prevention.md
  - docs/kb/governance/lane_coordination.md

related_tasks:
  - RIS-TASK-GOV-060-LANE-SETUP
  - RIS-TASK-GOV-063-LANE-COORDINATION

notes: |
  Conflict prevention engine operational. Features:
  - Pre-write path validation against allowed_paths.json
  - Cross-lane coordination requirement detection
  - Forbidden directory protection
  - Sandbox containment enforcement
  - Violation logging to RIS incidents
