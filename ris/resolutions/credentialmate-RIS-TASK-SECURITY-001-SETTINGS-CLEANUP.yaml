---
# RIS Task: Settings File Security Cleanup
task_id: RIS-TASK-SECURITY-001-SETTINGS-CLEANUP
event_type: security_cleanup
created: 2025-11-27T00:15:00Z
last_modified: 2025-11-27T00:15:00Z
status: completed
priority: high
risk_level: low
owner: security_lane
phase: 1
capsule: v1.8.2

description: |
  Remove hardcoded JWT tokens and encryption keys from .claude/settings.local.json.
  Replace with environment variable loading pattern via .env.local template.
  Aligns with Capsule v1.8.2 UGL-G (Environment Boundaries).

change_plan: |
  1. Archive original settings.local.json to zdelete/
  2. Remove 10 hardcoded JWT token auto-approvals
  3. Remove 3 hardcoded encryption key auto-approvals
  4. Preserve all command auto-approvals (safe)
  5. Create .env.local.template for local development
  6. Create archival manifest in zdelete/
  7. Verify no production secrets removed
  8. Document in KB

rollback_plan: |
  1. Restore from backup: cp zdelete/settings.local.json.backup.20251127 .claude/settings.local.json
  2. NOT recommended - reintroduces security risk
  3. Better: Generate fresh test tokens and add to .env.local

impact:
  risk_level: LOW
  security_improvement: HIGH
  affected_systems:
    - .claude/settings.local.json (auto-approval configuration)
    - Local development workflow (requires .env.local)
  user_impact: Developers must create .env.local file (one-time setup)
  data_impact: None (only test/dev secrets removed)
  compliance_impact: Positive (Capsule v1.8.2 UGL-G compliance)

secrets_removed:
  jwt_tokens: 10
  encryption_keys: 3
  production_secrets: 0
  risk_assessment: LOW (all test/dev only)

approver: user
approval_method: /claire TAM (Trusted Autonomous Mode)
execution_date: 2025-11-27T00:15:00Z
completion_date: 2025-11-27T00:20:00Z
related_kb: docs/kb/security/settings_cleanup.md
manifest: zdelete/SETTINGS_CLEANUP_MANIFEST.md
---